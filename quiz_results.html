<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>面试知识测评 - 结果分析</title>
    <style>
        /* 全局样式 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', Arial, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: #333;
        }
        
        /* 主容器 */
        .container {
            background-color: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-width: 900px;
            width: 100%;
            margin-top: 20px;
        }
        
        /* 标题样式 */
        .title {
            font-size: 2.2rem;
            margin-bottom: 20px;
            color: #2c3e50;
            font-weight: bold;
            text-align: center;
        }
        
        /* 副标题 */
        .subtitle {
            font-size: 1.1rem;
            margin-bottom: 30px;
            color: #7f8c8d;
            text-align: center;
            line-height: 1.6;
        }
        
        /* 岗位信息卡片 */
        .job-info {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .job-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        /* 总分卡片 */
        .score-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 40px;
        }
        
        .score-number {
            font-size: 3.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .score-label {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        /* 内容部分 */
        .section {
            margin-bottom: 40px;
            background-color: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .section:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .section-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .good-section .section-title {
            color: #27ae60;
        }
        
        .weak-section .section-title {
            color: #e74c3c;
        }
        
        .courses-section .section-title {
            color: #3498db;
        }
        
        /* 知识点列表 */
        .knowledge-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .knowledge-item {
            background-color: white;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #27ae60;
            transition: all 0.3s ease;
        }
        
        .good-section .knowledge-item {
            border-left-color: #27ae60;
        }
        
        .weak-section .knowledge-item {
            border-left-color: #e74c3c;
        }
        
        .knowledge-item:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .knowledge-item-title {
            font-weight: bold;
            margin-bottom: 5px;
            color: #2c3e50;
        }
        
        .knowledge-item-description {
            font-size: 0.9rem;
            color: #7f8c8d;
            line-height: 1.5;
        }
        
        /* 课程推荐卡片 */
        .courses-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .course-card {
            background-color: white;
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.3s ease;
            border: 2px solid #e0e0e0;
        }
        
        .course-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            border-color: #3498db;
        }
        
        .course-image {
            height: 150px;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
        }
        
        .course-content {
            padding: 20px;
        }
        
        .course-title {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .course-description {
            font-size: 0.9rem;
            color: #7f8c8d;
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        .course-meta {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            color: #3498db;
        }
        
        .course-duration {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .course-level {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        /* 按钮容器 */
        .buttons-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 40px;
        }
        
        /* 按钮样式 */
        .btn {
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(79, 172, 254, 0.4);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            color: #2c3e50;
        }
        
        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(250, 112, 154, 0.4);
        }
        
        /* 返回按钮 */
        .back-button {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s ease;
            color: #2c3e50;
        }
        
        .back-button:hover {
            background: white;
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        /* 图标样式 */
        .icon {
            font-size: 1.2rem;
        }
        
        /* 空状态提示 */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #7f8c8d;
        }
        
        .empty-state-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            opacity: 0.5;
        }
        
        /* 响应式调整 */
        @media (max-width: 768px) {
            .container {
                padding: 30px 20px;
            }
            
            .title {
                font-size: 1.8rem;
            }
            
            .job-title {
                font-size: 1.3rem;
            }
            
            .score-number {
                font-size: 2.8rem;
            }
            
            .back-button {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
                top: 15px;
                left: 15px;
            }
            
            .buttons-container {
                flex-direction: column;
            }
            
            .knowledge-list,
            .courses-container {
                grid-template-columns: 1fr;
            }
        }
        
        /* 动画效果 */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .container {
            animation: fadeIn 0.5s ease-out;
        }
        
        .section {
            animation: fadeIn 0.5s ease-out;
            animation-fill-mode: both;
        }
        
        .good-section { animation-delay: 0.2s; }
        .weak-section { animation-delay: 0.4s; }
        .courses-section { animation-delay: 0.6s; }
    </style>
</head>
<body>
    <!-- 返回按钮 -->
    <button class="back-button" onclick="window.location.href='quiz_page.html'">
        ←
    </button>
    
    <div class="container">
        <h1 class="title">面试知识测评结果</h1>
        <p class="subtitle">基于您的答题情况，我们为您生成了个性化的知识分析报告</p>
        
        <!-- 岗位信息 -->
        <div class="job-info">
            <div class="job-title" id="displayJobTitle">前端开发工程师</div>
            <div>个性化知识测评分析</div>
        </div>
        
        <!-- 总分卡片 -->
        <div class="score-card">
            <div class="score-number" id="scoreDisplay">0/5</div>
            <div class="score-label" id="scoreLabel">选择题得分 (问答题需人工评分)</div>
        </div>
        
        <!-- 掌握较好的知识点 -->
        <div class="section good-section">
            <h2 class="section-title">
                <span class="icon">✅</span>
                掌握较好的知识点
            </h2>
            <div class="knowledge-list" id="goodKnowledgeList">
                <!-- 内容将通过JavaScript动态生成 -->
            </div>
        </div>
        
        <!-- 不足的知识点 -->
        <div class="section weak-section">
            <h2 class="section-title">
                <span class="icon">⚠️</span>
                需要加强的知识点
            </h2>
            <div class="knowledge-list" id="weakKnowledgeList">
                <!-- 内容将通过JavaScript动态生成 -->
            </div>
        </div>
        
        <!-- 推荐学习课程 -->
        <div class="section courses-section">
            <h2 class="section-title">
                <span class="icon">📚</span>
                推荐学习课程
            </h2>
            <div class="courses-container" id="recommendedCourses">
                <!-- 内容将通过JavaScript动态生成 -->
            </div>
        </div>
        
        <!-- 按钮 -->
        <div class="buttons-container">
            <button class="btn btn-primary" onclick="window.location.href='quiz_page.html'">重新测评</button>
            <button class="btn btn-secondary" onclick="window.location.href='before_interview.html'">返回准备页面</button>
        </div>
    </div>

    <script>
        // 知识点数据
        const knowledgePoints = {
            q1: {
                title: "JavaScript异步编程",
                description: "Promise、async/await等异步编程模式",
                category: "JavaScript核心"
            },
            q2: {
                title: "CSS响应式设计",
                description: "媒体查询、弹性布局、流式布局等响应式技术",
                category: "CSS"
            },
            q3: {
                title: "React生命周期",
                description: "React组件生命周期和钩子函数",
                category: "前端框架"
            },
            q4: {
                title: "HTTP协议",
                description: "HTTP方法、状态码、请求响应等",
                category: "网络"
            },
            q5: {
                title: "前端工程化",
                description: "包管理工具、构建工具等工程化知识",
                category: "工程化"
            }
        };
        
        // 课程推荐数据
        const courseRecommendations = {
            "JavaScript核心": [
                {
                    title: "JavaScript高级编程实战",
                    description: "深入学习JavaScript异步编程、闭包、原型链等核心概念",
                    duration: "24小时",
                    level: "中级"
                },
                {
                    title: "现代JavaScript开发实战",
                    description: "掌握ES6+新特性，提升代码质量和开发效率",
                    duration: "18小时",
                    level: "中级"
                }
            ],
            "CSS": [
                {
                    title: "CSS3高级动画与交互",
                    description: "学习CSS3动画、过渡效果和响应式设计",
                    duration: "15小时",
                    level: "中级"
                },
                {
                    title: "现代CSS布局技术",
                    description: "深入Flexbox和Grid布局，构建复杂页面结构",
                    duration: "12小时",
                    level: "初级"
                }
            ],
            "前端框架": [
                {
                    title: "React全面实战指南",
                    description: "从基础到高级，掌握React开发的各个方面",
                    duration: "30小时",
                    level: "初级到高级"
                },
                {
                    title: "React Hooks深度解析",
                    description: "深入理解React Hooks原理与最佳实践",
                    duration: "16小时",
                    level: "中级"
                }
            ],
            "网络": [
                {
                    title: "Web网络基础与性能优化",
                    description: "学习HTTP/HTTPS协议、网络优化策略",
                    duration: "18小时",
                    level: "初级"
                },
                {
                    title: "API设计与开发最佳实践",
                    description: "掌握RESTful API设计原则和实现方法",
                    duration: "20小时",
                    level: "中级"
                }
            ],
            "工程化": [
                {
                    title: "前端工程化实践",
                    description: "学习构建工具、模块化、自动化测试等工程化知识",
                    duration: "22小时",
                    level: "中级"
                },
                {
                    title: "现代前端开发环境搭建",
                    description: "掌握npm、webpack等工具的高级配置和使用",
                    duration: "16小时",
                    level: "初级到中级"
                }
            ]
        };
        
        // 获取URL参数
        function getUrlParams() {
            const params = new URLSearchParams(window.location.search);
            const result = {};
            for (const [key, value] of params) {
                result[key] = value;
            }
            return result;
        }
        
        // 加载测评结果数据
        function loadQuizResults() {
            // 从URL参数获取得分
            const params = getUrlParams();
            let score = parseInt(params.score) || 0;
            
            // 也可以尝试从localStorage获取得分
            if (score === 0) {
                const savedScore = localStorage.getItem('quizScore');
                if (savedScore) {
                    score = parseInt(savedScore);
                }
            }
            
            // 获取用户的答案
            const savedAnswers = localStorage.getItem('quizAnswers');
            let answers = {};
            if (savedAnswers) {
                answers = JSON.parse(savedAnswers);
            }
            
            return { score, answers };
        }
        
        // 显示岗位信息
        function displayJobInfo() {
            // 从URL参数或localStorage获取岗位信息
            const params = getUrlParams();
            const jobTitle = params.jobTitle || localStorage.getItem('interviewJobTitle') || '前端开发工程师';
            
            document.getElementById('displayJobTitle').textContent = jobTitle;
        }
        
        // 显示得分
        function displayScore(score) {
            document.getElementById('scoreDisplay').textContent = `${score}/5`;
            
            // 根据得分显示不同的标签
            const scoreLabel = document.getElementById('scoreLabel');
            if (score === 5) {
                scoreLabel.textContent = '优秀！您的基础知识非常扎实';
                scoreLabel.style.color = '#27ae60';
            } else if (score >= 3) {
                scoreLabel.textContent = '良好！您的基础知识掌握得不错';
                scoreLabel.style.color = '#f39c12';
            } else {
                scoreLabel.textContent = '需要加强！建议您复习相关基础知识';
                scoreLabel.style.color = '#e74c3c';
            }
        }
        
        // 显示掌握较好的知识点
        function displayGoodKnowledgePoints(answers) {
            const goodKnowledgeList = document.getElementById('goodKnowledgeList');
            const goodPoints = [];
            
            // 正确答案
            const correctAnswers = {
                q1: 'B',
                q2: 'C',
                q3: 'A',
                q4: 'C',
                q5: 'A'
            };
            
            // 找出用户答对的题目
            for (let i = 1; i <= 5; i++) {
                const questionName = 'q' + i;
                if (answers[questionName] && answers[questionName] === correctAnswers[questionName]) {
                    goodPoints.push(knowledgePoints[questionName]);
                }
            }
            
            // 如果没有答对的题目，显示空状态
            if (goodPoints.length === 0) {
                goodKnowledgeList.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">📊</div>
                        <p>继续努力！多练习可以提高您的知识水平</p>
                    </div>
                `;
                return goodPoints;
            }
            
            // 显示答对的知识点
            goodPoints.forEach(point => {
                const item = document.createElement('div');
                item.className = 'knowledge-item';
                item.innerHTML = `
                    <div class="knowledge-item-title">${point.title}</div>
                    <div class="knowledge-item-description">${point.description}</div>
                `;
                goodKnowledgeList.appendChild(item);
            });
            
            return goodPoints;
        }
        
        // 显示需要加强的知识点
        function displayWeakKnowledgePoints(answers) {
            const weakKnowledgeList = document.getElementById('weakKnowledgeList');
            const weakPoints = [];
            
            // 正确答案
            const correctAnswers = {
                q1: 'B',
                q2: 'C',
                q3: 'A',
                q4: 'C',
                q5: 'A'
            };
            
            // 找出用户答错或未答的题目
            for (let i = 1; i <= 5; i++) {
                const questionName = 'q' + i;
                if (!answers[questionName] || answers[questionName] !== correctAnswers[questionName]) {
                    weakPoints.push(knowledgePoints[questionName]);
                }
            }
            
            // 如果所有题目都答对了，显示空状态
            if (weakPoints.length === 0) {
                weakKnowledgeList.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">🎉</div>
                        <p>太棒了！您已经掌握了所有测试的知识点</p>
                    </div>
                `;
                return weakPoints;
            }
            
            // 显示需要加强的知识点
            weakPoints.forEach(point => {
                const item = document.createElement('div');
                item.className = 'knowledge-item';
                item.innerHTML = `
                    <div class="knowledge-item-title">${point.title}</div>
                    <div class="knowledge-item-description">${point.description}</div>
                `;
                weakKnowledgeList.appendChild(item);
            });
            
            return weakPoints;
        }
        
        // 显示推荐课程
        function displayRecommendedCourses(weakPoints) {
            const recommendedCourses = document.getElementById('recommendedCourses');
            
            // 如果没有需要加强的知识点，显示默认推荐
            if (weakPoints.length === 0) {
                // 显示所有类别的推荐课程
                const allCategories = Object.keys(courseRecommendations);
                allCategories.forEach(category => {
                    courseRecommendations[category].forEach(course => {
                        addCourseCard(recommendedCourses, course);
                    });
                });
                return;
            }
            
            // 根据薄弱知识点的类别推荐课程
            const recommendedCategories = new Set();
            weakPoints.forEach(point => {
                recommendedCategories.add(point.category);
            });
            
            // 添加推荐课程
            recommendedCategories.forEach(category => {
                if (courseRecommendations[category]) {
                    courseRecommendations[category].forEach(course => {
                        addCourseCard(recommendedCourses, course);
                    });
                }
            });
        }
        
        // 添加课程卡片
        function addCourseCard(container, course) {
            const card = document.createElement('div');
            card.className = 'course-card';
            
            // 随机生成课程图片颜色
            const colors = [
                'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',
                'linear-gradient(135deg, #fa709a 0%, #fee140 100%)',
                'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',
                'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)'
            ];
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            
            card.innerHTML = `
                <div class="course-image" style="background: ${randomColor};">
                    📚
                </div>
                <div class="course-content">
                    <div class="course-title">${course.title}</div>
                    <div class="course-description">${course.description}</div>
                    <div class="course-meta">
                        <div class="course-duration">⏱ ${course.duration}</div>
                        <div class="course-level">📊 ${course.level}</div>
                    </div>
                </div>
            `;
            
            container.appendChild(card);
        }
        
        // 初始化
        function init() {
            displayJobInfo();
            
            const { score, answers } = loadQuizResults();
            displayScore(score);
            
            const goodPoints = displayGoodKnowledgePoints(answers);
            const weakPoints = displayWeakKnowledgePoints(answers);
            
            displayRecommendedCourses(weakPoints);
        }
        
        // 页面加载完成后初始化
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>